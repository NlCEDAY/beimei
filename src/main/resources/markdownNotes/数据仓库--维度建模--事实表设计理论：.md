## 数据仓库--维度建模--事实表设计理论：

### 一：什么是事实表？

> 它是度量业务过程（行为事件）的事实，往往它是数字化的

#### 事实的分类：

- `可加事实`

  > 可以按照与事实表关联的任意维度进行汇总

  

- `半可加事实`

  > 只能按照特定维度汇总，按照其他维度汇总会失去现实意义

- `不可加事实`

  > 与可加事实相反，比如比率事实，它明显与不管什么维度汇总，都无意义。

#### 事实表的分类：

- `事务事实表`

  > 描述**业务过程，········································································································跟踪空间或时间上某点**的度量事件，又称原子事实表

- `周期快照事实表`

  > 以**具有规律性的，可预见的时间间隔**  记录事实

- `累计快照事实表`

  > **表述过程开始和结束之间的关键步骤**的事件

### 二：怎么进行事实表的设计？

#### 第一步：选择业务过程（确定事实表类型）

> 所谓业务过程的确定，在我看来就是对动作的拆解至不可分，

如果针对淘宝业务，我买在淘宝买东西，从时间角度看拆成4个业务过程：

> 买家下单-->创建订单-->买家付款-->卖家发货-->买家收货



#### 第二步：声明粒度

> 申明粒度即确定事实表每一行所表示的具体的业务含义。

- 尽量选择最细级别的原子粒度

申明粒度这里虽然确定了你认为的最细细粒度，但是后期业务如果发现还可以划分更细粒度，可以回过头重新划分。

这里的四个业务过程，都在对商品进行操作，但是商品仍然可以继续划分，一类商品可以拆成多个订单。

#### 第三步：确定维度

> 完成粒度申明后，相当于确定了主键，那么对应的维度组合以及相关的维度字段就可以确定。

#### 第四步：确定事实

#### 第五步：冗余维度

### 三：事实表设计的规范有哪些？

#### 八大设计原则：

1. **原则一： 尽可能包含所有与业务过程相关的事实**
2. **原则二： 只选择与业务过程相关的事实**
3. **原则三： 分解不可加事实为可加的组件**
4. **原则四： 在选择维度和事实之前必须先声明粒度**
5. **原则五： 在同一个事实表中不能有多种不同粒度的事实**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
6. **原则六： 事实的单位要保持一致**
7. **原则七： 对事实的null值要处理**
8. **原则八： 使用退化维度提高事实表的易用性**





### 四：事实表的种类详解

#### 单事务事实表：

> 将每个业务过程设计成一个事实表

#### 多事务事实表：

 

